#' Generate N-Sink Static Maps for a given HUC
#'
#' @param input_data A list of input datasets created with
#'                   \code{\link{nsink_prep_data}}.
#' @param removal the removal raster stack or removal list, generated by
#'                \code{\link{nsink_calc_removal}}
#' @param data_dir Base directory that contains N-Sink data folders and prepped
#'                 data.  Data may be downloaded with the
#'                 \code{\link{nsink_get_data}} function and prepared with the
#'                 \code{\link{nsink_prep_data}} function. A new folder named
#'                 "static_maps" with the .tif files will be created in this
#'                 folder.
#' @param custom_load Place holder for a custom loading index.  Currently uses
#'                    values culled from the literature.  Custom loads are not yet
#'                    implemented
#' @export
#' @examples
#' nsink_generate_static_maps(palmer_prep_data, palmer_removal, "palmer_nsink_data/")
#'
nsink_generate_static_maps <- function(input_data, removal,
                                       data_dir = normalizePath("nsink_data/"),
                                       custom_load = NULL){
  browser()
  # Check for/create/clean data directory
  data_dir <- nsink_fix_data_directory(data_dir)

  # Create static rasters
  removal_map <- removal$raster_method[["layer.1"]]
  n_load_idx <- nsink_generate_n_loading_index(input_data)
  n_removal_heat <- nsink_generate_n_removal_heatmap(removal, density = 9, ncpu = 1)
  n_delivery_index <- n_load_idx * n_removal_heat

  # Write out static rasters to tif
  raster::writeRaster()
}

#' Generates the Nitrogen Loading Index
#'
#' This function reclassifies the NLCD data to an index of Nitrogen loading.
#' The index ranges from 0 to 1.
#'
#' @param input_data list of input data
#' @param custom_load Place holder for a custom loading index.  Currently uses
#'                    values culled from the literature and stored as a dataset,
#'                    \code{n_load_idx_lookup}, which is loaded with
#'                    \code{nsink}.  Custom loads are not yet implemented.
#' @keywords internal
nsink_generate_n_loading_index <- function(input_data, custom_load = NULL){
  browser()
  nlcd <- input_data$nlcd
  #Need to add in NLCD codes

}

nsink_generate_n_removal_heatmap <- function(){}

